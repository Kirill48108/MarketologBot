# =======================
# Telegram API credentials
# =======================
TELEGRAM_API_ID=1234567
TELEGRAM_API_HASH=your_api_hash_here
# Строка сессии Telethon (StringSession). Сгенерируйте через session_gen.py.
TELEGRAM_SESSION_STRING=

# =======================
# Бот и каналы
# =======================
BOT_ENABLED=true

# Список каналов (int ID), где этот аккаунт может писать.
# Пример: [-1002358703466, -1002048543000]
ALLOWLIST_CHAT_IDS=[]

# =======================
# Тайминги и лимиты
# =======================

# Окна активности (локальное время). Формат: "start-end,start-end"
# Например: 5-10 (с 5 до 10 утра), 18-24 (с 18 до полуночи)
ACTIVE_WINDOWS=5-10,18-24

# Максимальное количество сообщений в сутки от этого аккаунта
MESSAGES_PER_DAY=40

# Средняя желаемая интенсивность, сообщений в час
MESSAGES_PER_HOUR=8

# Минимальный интервал между любыми двумя сообщениями этого аккаунта
MIN_INTERVAL_BETWEEN_MESSAGES_SECONDS=90

# Минимальный интервал между сообщениями в один и тот же канал
MIN_INTERVAL_PER_CHAT_SECONDS=2400

# Максимальный возраст поста (в минутах), для которого ещё имеет смысл комментировать
FRESH_POST_MAX_AGE_MINUTES=1440

# Максимум instant-комментариев в час на один канал
MAX_INSTANT_PER_CHAT_PER_HOUR=2

# =======================
# LLM (Ollama / OpenAI-compatible)
# =======================

# Для локальной Ollama:
OPENAI_BASE_URL=http://ollama:11434/v1
OPENAI_API_KEY=ollama
LLM_MODEL=llama3.1:8b

# Параметры генерации
LLM_TEMPERATURE=0.4
LLM_MIN_LEN=30
LLM_MAX_LEN=220
LLM_MAX_EMOJIS=1
# Если false — пропускаем строгую валидацию и почти не трогаем ответ модели.
LLM_STRICT_VALIDATE=false
LLM_TOP_P=0.9
LLM_FREQUENCY_PENALTY=0.3
LLM_PRESENCE_PENALTY=0.2

# Задержка для instant-комментариев (секунд)
INSTANT_COMMENT_DELAY_SECONDS=300

# =======================
# Анти-спамблок (глобальный)
# =======================

# Минимальное время "тишины" (в секундах) после серии PeerFlood/FloodWait ошибок
SPAMBLOCK_MIN_COOLDOWN_SECONDS=3600

# Максимальное время "тишины" (верхняя граница, в секундах)
SPAMBLOCK_MAX_COOLDOWN_SECONDS=86400

# Сколько подряд серьёзных ошибок (PeerFlood/FloodWait) нужно,
# чтобы считать аккаунт временно заблокированным
SPAMBLOCK_ERROR_THRESHOLD=3

# =======================
# Хранилища
# =======================

# PostgreSQL DSN (используется SQLAlchemy)
# Для docker-compose по умолчанию:
#  хост postgres, порт 5432, база mb_db, логин user/password
POSTGRES_DSN=postgresql+psycopg2://user:password@postgres:5432/mb_db

# Redis для кэша
REDIS_URL=redis://redis:6379/0

# TTL кэша для LLM-ответов (секунд)
CACHE_TTL_SECONDS=900

# =======================
# Админ
# =======================

# Токен для простых админ-эндпоинтов (если используются)
ADMIN_TOKEN=change-me

# =======================
# Прокси (опционально)
# =======================

# TG_PROXY_HOST=your_proxy_host
# TG_PROXY_PORT=1080
# TG_PROXY_USER=your_proxy_user
# TG_PROXY_PASS=your_proxy_password